<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Riwayat Transaksi - BersihXpress</title>

    <link rel="stylesheet" href="../../assets/css/style.css">
    <link rel="stylesheet" href="../../assets/css/webview.css">
    <script src="../../assets/js/webview.js"></script>
    <script src="../../assets/js/tailwind.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Poppins', 'sans-serif'],
                    },
                }
            }
        }
    </script>
</head>

<body class="bg-gray-100 flex flex-col h-screen">
    <div id="loading-overlay" class="loading-container">
        <img src="../../assets/images/loading.gif" alt="Memuat..." class="loading-indicator">
    </div>

    <div id="main-content" class="flex flex-col flex-grow">
        <header class="sticky top-0 z-10 bg-blue-600 rounded-b-[32px] p-6 pb-6 shadow-lg flex-shrink-0">
            <h1 class="text-2xl font-bold text-white">Riwayat Transaksi</h1>
            <p class="text-sm opacity-90 text-white">BersihXpress</p>
            <div class="flex items-center space-x-3 mt-4">
                <div class="relative flex-grow">
                    <span class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><svg
                            data-feather="search" class="h-5 w-5 text-gray-400"></svg></span>
                    <input type="text" class="w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg"
                        placeholder="Cari Nama Atau ID Nota...">
                </div>
                <button id="btn-tambah-transaksi" class="bg-white p-3 rounded-lg shadow flex-shrink-0">
                    <svg data-feather="plus" class="h-6 w-6 text-blue-600"></svg>
                </button>
            </div>
        </header>

        <nav class="sticky top-[174px] z-10 bg-gray-100 pt-4 pb-3 px-6 flex-shrink-0">
            <div class="flex space-x-3 overflow-x-auto no-scrollbar">
                <button class="filter-chip-active px-5 py-2 rounded-full text-sm filter-chip-active">Semua</button>
                <button class="bg-white px-5 py-2 rounded-full text-sm text-gray-700">Antrian</button>
                <button class="bg-white px-5 py-2 rounded-full text-sm text-gray-700">Proses</button>
                <button class="bg-white px-5 py-2 rounded-full text-sm text-gray-700">Selesai</button>
            </div>
        </nav>

        <main class="flex-grow overflow-y-auto p-6 space-y-4">
            <button class="btn-buka-rincian w-full bg-white rounded-lg shadow p-4 text-left">
                <div class="flex justify-between items-start">
                    <div class="flex items-center">
                        <div class="p-2 bg-gray-100 rounded-lg mr-3"><svg data-feather="file-text"
                                class="w-5 h-5 text-gray-600"></svg></div>
                        <div>
                            <p class="text-sm font-semibold text-gray-800">ID Nota #0913123</p>
                            <p class="text-lg font-bold text-gray-900">Kosimudin</p>
                        </div>
                    </div>
                    <div>
                        <p class="text-lg font-bold text-gray-900 text-right">Rp 107.000</p><span
                            class="text-xs font-semibold bg-green-100 text-green-700 rounded-full px-2 py-0.5">Selesai</span>
                    </div>
                </div>
                <div class="border-t border-dashed mt-3 pt-3 text-sm text-gray-500">
                    <p>Masuk : 21/11/2025 - 16:00</p>
                    <p>Selesai : 8 Jam lagi</p>
                </div>
            </button>
        </main>
    </div>

    <nav
        class="sticky bottom-0 left-0 right-0 bg-white border-t border-gray-200 grid grid-cols-4 gap-2 px-4 py-3 shadow-[0_-2px_5px_rgba(0,0,0,0.05)] flex-shrink-0 z-20">

        <a href="dashboard.html" class="flex flex-col items-center text-gray-500 px-4 py-2">
            <svg data-feather="home" class="w-6 h-6"></svg>
            <span class="text-xs mt-1 font-semibold">Beranda</span>
        </a>

        <a href="transaksi.html" class="flex flex-col items-center text-blue-600 bg-blue-100 rounded-lg px-4 py-2">
            <svg data-feather="file-text" class="w-6 h-6"></svg>
            <span class="text-xs mt-1">Transaksi</span>
        </a>

        <a href="laporan.html" class="flex flex-col items-center text-gray-500 px-4 py-2">
            <svg data-feather="bar-chart-2" class="w-6 h-6"></svg>
            <span class="text-xs mt-1">Laporan</span>
        </a>

        <a href="profile.html" class="flex flex-col items-center text-gray-500 px-4 py-2">
            <svg data-feather="user" class="w-6 h-6"></svg>
            <span class="text-xs mt-1">Akun</span>
        </a>
    </nav>

    <div id="modal-container" class="hidden z-30">

        <div id="modal-backdrop" class="modal-backdrop fixed inset-0 bg-black/50 z-40 opacity-0"></div>
        <div id="modal-rincian"
            class="modal-popup fixed bottom-0 left-0 right-0 bg-white rounded-t-[24px] shadow-2xl z-50 flex flex-col h-[95vh]">

            <div class="flex-shrink-0 bg-white rounded-t-[24px]">
                <div class="w-full py-3">
                    <div class="w-12 h-1.5 bg-gray-300 rounded-full mx-auto"></div>
                </div>
                <div class="flex justify-between items-center px-6 pb-4">
                    <h2 class="text-xl font-bold text-gray-900">Rincian Transaksi</h2>
                    <button class="btn-close-rincian p-1 text-gray-500 hover:text-gray-800">
                        <svg data-feather="x" class="w-6 h-6"></svg>
                    </button>
                </div>

                <div class="px-6 pb-4 border-b border-gray-200">
                    <p class="text-lg font-bold text-gray-900">Kosimudin</p>
                    <p class="text-sm text-gray-500 -mt-1">ID Nota #0913123</p>

                    <div class="grid grid-cols-3 gap-3 mt-4 text-center">
                        <div class="bg-gray-100 p-3 rounded-lg">
                            <span class="text-xs text-gray-500">Total Tagihan</span>
                            <p class="text-xl font-bold text-blue-600">Rp 107rb</p>
                        </div>
                        <div class="bg-gray-100 p-3 rounded-lg">
                            <span class="text-xs text-gray-500">Status Bayar</span>
                            <p class="text-xl font-bold text-gray-900">Lunas</p>
                        </div>
                        <div class="bg-gray-100 p-3 rounded-lg">
                            <span class="text-xs text-gray-500">Status Pesanan</span>
                            <p class="text-xl font-bold text-gray-900">Selesai</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="flex-grow overflow-y-auto divide-y divide-gray-100 no-scrollbar">

                <section class="py-5 px-6">
                    <h3 class="text-base font-semibold text-gray-800 mb-3">Rincian Layanan</h3>
                    <div class="space-y-3 text-sm">
                        <div class="flex justify-between">
                            <div>
                                <p class="font-medium text-gray-800">Kiloan Reguler</p>
                                <p class="text-gray-500">5 Kg x Rp 7.000</p>
                            </div>
                            <span class="font-medium text-gray-800">Rp 35.000</span>
                        </div>
                        <div class="flex justify-between">
                            <div>
                                <p class="font-medium text-gray-800">Cuci Karpet</p>
                                <p class="text-gray-500">1 Pcs x Rp 72.000</p>
                            </div>
                            <span class="font-medium text-gray-800">Rp 72.000</span>
                        </div>
                    </div>
                </section>

                <section class="py-5 px-6">
                    <h3 class="text-base font-semibold text-gray-800 mb-3">Rincian Pembayaran</h3>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between"><span class="text-gray-500">Subtotal Layanan</span><span
                                class="font-medium text-gray-800">Rp 107.000</span></div>
                        <div class="flex justify-between"><span class="text-gray-500">Diskon</span><span
                                class="font-medium text-gray-800">- Rp 0</span></div>
                        <div class="flex justify-between border-t border-dashed mt-2 pt-2">
                            <span class="text-base font-bold text-gray-900">Total Akhir</span>
                            <span class="text-base font-bold text-blue-600">Rp 107.000</span>
                        </div>
                        <div class="flex justify-between"><span class="text-gray-500">Metode Bayar</span><span
                                class="font-medium text-gray-800">Tunai</span></div>
                    </div>
                </section>

                <section class="py-5 px-6">
                    <h3 class="text-base font-semibold text-gray-800 mb-3">Rincian Waktu</h3>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between"><span class="text-gray-500">Tanggal Masuk</span><span
                                class="font-medium text-gray-800">22 Okt 2025, 19:00</span></div>
                        <div class="flex justify-between"><span class="text-gray-500">Tanggal Selesai</span><span
                                class="font-medium text-gray-800">23 Okt 2025, 19:00</span></div>
                    </div>
                </section>

                <section class="py-5 px-6">
                    <h3 class="text-base font-semibold text-gray-800 mb-3">Aksi Lainnya</h3>
                    <div class="space-y-3">
                        <button
                            class="w-full flex items-center justify-between bg-white border border-gray-200 rounded-lg shadow-sm p-4 text-left hover:bg-gray-50">
                            <div class="flex items-center">
                                <div class="p-2 bg-gray-100 rounded-lg mr-3"><svg data-feather="printer"
                                        class="w-5 h-5 text-gray-700"></svg></div>
                                <p class="font-semibold text-gray-800">Cetak Nota</p>
                            </div>
                            <svg data-feather="chevron-right" class="w-5 h-5 text-gray-400"></svg>
                        </button>
                        <button
                            class="w-full flex items-center justify-between bg-white border border-gray-200 rounded-lg shadow-sm p-4 text-left hover:bg-gray-50">
                            <div class="flex items-center">
                                <div class="p-2 bg-green-100 rounded-lg mr-3"><svg data-feather="message-circle"
                                        class="w-5 h-5 text-green-700"></svg></div>
                                <p class="font-semibold text-gray-800">Kirim Pesan (WhatsApp)</p>
                            </div>
                            <svg data-feather="chevron-right" class="w-5 h-5 text-gray-400"></svg>
                        </button>
                        <button id="btn-buka-opsi"
                            class="w-full flex items-center justify-between bg-white border border-gray-200 rounded-lg shadow-sm p-4 text-left hover:bg-gray-50">
                            <div class="flex items-center">
                                <div class="p-2 bg-gray-100 rounded-lg mr-3"><svg data-feather="settings"
                                        class="w-5 h-5 text-gray-700"></svg></div>
                                <div>
                                    <p class="font-semibold text-gray-800">Ubah Status</p>
                                    <p class="text-sm text-gray-500">Ubah status bayar atau pesanan</p>
                                </div>
                            </div>
                            <svg data-feather="chevron-right" class="w-5 h-5 text-gray-400"></svg>
                        </button>
                    </div>
                </section>
            </div>

            <div class="flex-shrink-0 p-6 bg-white border-t border-gray-200">
                <button id="btn-aksi-utama"
                    class="w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700 shadow-sm">
                    Tandai Selesai
                </button>
            </div>
        </div>
    </div>

    <div id="modal-opsi-lanjutan"
        class="modal-popup-nested hidden fixed bottom-0 left-0 right-0 bg-white rounded-t-[24px] shadow-2xl z-50 flex flex-col">
        <div class="flex-shrink-0">
            <div class="w-full py-3">
                <div class="w-12 h-1.5 bg-gray-300 rounded-full mx-auto"></div>
            </div>
            <div class="flex justify-between items-center px-6 pb-4">
                <h2 class="text-xl font-bold text-gray-900">Opsi Lanjutan</h2>
                <button class="btn-close-nested p-1 text-gray-500 hover:text-gray-800"
                    data-modal-id="modal-opsi-lanjutan">
                    <svg data-feather="x" class="w-6 h-6"></svg>
                </button>
            </div>
        </div>
        <div class="px-6 space-y-4 overflow-y-auto no-scrollbar flex-grow">
            <form id="form-opsi-lanjutan" class="space-y-4">
                <div>
                    <label for="opsi_pembayaran" class="text-sm font-medium text-gray-600">Ubah Status
                        Pembayaran</label>
                    <div class="relative mt-1">
                        <span class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><svg
                                data-feather="dollar-sign" class="h-5 w-5 text-gray-400"></svg></span>
                        <select id="opsi_pembayaran"
                            class="w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white">
                            <option>Belum Lunas</option>
                            <option>Lunas Tunai</option>
                            <option>Lunas Non Tunai</option>
                        </select>
                    </div>
                </div>
                <div>
                    <label for="opsi_status" class="text-sm font-medium text-gray-600">Ubah Status Pesanan</label>
                    <div class="relative mt-1">
                        <span class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><svg
                                data-feather="refresh-cw" class="h-5 w-5 text-gray-400"></svg></span>
                        <select id="opsi_status"
                            class="w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white">
                            <option>Antrian</option>
                            <option>Diproses</option>
                            <option>Siap Diambil</option>
                            <option>Selesai</section>
                            <option>Batal</option>
                        </select>
                    </div>
                </div>
            </form>
        </div>
        <div class="flex-shrink-0 p-6 bg-white border-t border-gray-200 flex space-x-3">
            <button
                class="btn-close-nested w-1/2 bg-white border border-gray-300 text-gray-700 font-bold py-3 px-4 rounded-lg hover:bg-gray-50"
                data-modal-id="modal-opsi-lanjutan">
                Batal
            </button>
            <button type="submit" form="form-opsi-lanjutan"
                class="btn-simpan-nested w-1/2 bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700"
                data-modal-id="modal-opsi-lanjutan">
                Simpan Perubahan
            </button>
        </div>
    </div>

    <div id="modal-buat-transaksi"
        class="modal-popup fixed bottom-0 left-0 right-0 bg-white rounded-t-[24px] shadow-2xl z-50 flex flex-col h-auto">
        <div class="flex-shrink-0">
            <div class="w-full py-3">
                <div class="w-12 h-1.5 bg-gray-300 rounded-full mx-auto"></div>
            </div>
            <div class="flex justify-between items-center px-6 pb-4">
                <h2 class="text-xl font-bold text-gray-900">Buat Transaksi</h2><button
                    class="btn-close-global p-1 text-gray-500 hover:text-gray-800"><svg data-feather="x"
                        class="w-6 h-6"></svg></button>
            </div>
        </div>
        <div class="px-6 pb-6 space-y-3 overflow-y-auto no-scrollbar">
            <button id="btn-transaksi-manual"
                class="w-full flex items-center justify-between bg-white border border-gray-200 rounded-lg shadow-sm p-4 text-left hover:bg-gray-50">
                <div class="flex items-center">
                    <div class="p-2 bg-gray-100 rounded-lg mr-3"><svg data-feather="box"
                            class="w-5 h-5 text-gray-700"></svg></div>
                    <div>
                        <p class="font-semibold text-gray-800">Transaksi Manual</p>
                        <p class="text-sm text-gray-500">Manual input</p>
                    </div>
                </div><svg data-feather="chevron-right" class="w-5 h-5 text-gray-400"></svg>
            </button>
            <button id="btn-transaksi-template"
                class="w-full flex items-center justify-between bg-white border border-gray-200 rounded-lg shadow-sm p-4 text-left hover:bg-gray-50">
                <div class="flex items-center">
                    <div class="p-2 bg-gray-100 rounded-lg mr-3"><svg data-feather="grid"
                            class="w-5 h-5 text-gray-700"></svg></div>
                    <div>
                        <p class="font-semibold text-gray-800">Transaksi Template</p>
                        <p class="text-sm text-gray-500">Pilih dari paket layanan jadi</p>
                    </div>
                </div><svg data-feather="chevron-right" class="w-5 h-5 text-gray-400"></svg>
            </button>
            <button id="btn-pengeluaran"
                class="w-full flex items-center justify-between bg-white border border-gray-200 rounded-lg shadow-sm p-4 text-left hover:bg-gray-50">
                <div class="flex items-center">
                    <div class="p-2 bg-gray-100 rounded-lg mr-3"><svg data-feather="box"
                            class="w-5 h-5 text-gray-700"></svg></div>
                    <div>
                        <p class="font-semibold text-gray-800">Pengeluaran</p>
                        <p class="text-sm text-gray-500">Pengeluaran Kas Dll</p>
                    </div>
                </div><svg data-feather="chevron-right" class="w-5 h-5 text-gray-400"></svg>
            </button>
        </div>

        <div class="flex-shrink-0 p-6 bg-white border-t border-gray-100">
            <button
                class="btn-close-global w-full bg-white border border-gray-300 text-gray-700 font-bold py-3 px-4 rounded-lg hover:bg-gray-50">
                Batal
            </button>
        </div>
    </div>

    <div id="modal-rincian-transaksi"
        class="modal-popup hidden fixed bottom-0 left-0 right-0 bg-white rounded-t-[24px] shadow-2xl z-50 flex flex-col h-[90vh]">
        <div class="flex-shrink-0">
            <div class="w-full py-3">
                <div class="w-12 h-1.5 bg-gray-300 rounded-full mx-auto"></div>
            </div>
            <div class="flex justify-between items-center px-6 pb-4">
                <h2 class="text-xl font-bold text-gray-900">Buat Transaksi Manual</h2>
                <button class="btn-close-global p-1 text-gray-500 hover:text-gray-800"><svg data-feather="x"
                        class="w-6 h-6"></svg></button>
            </div>
        </div>
        <div class="flex-grow overflow-y-auto p-6 no-scrollbar">
            <form id="form-buat-transaksi" class="space-y-6">

                <section>
                    <h3 class="text-lg font-semibold text-gray-800 mb-3 pb-2 border-b">1. Informasi Pelanggan</h3>
                    <div class="space-y-4">
                        <div><label for="cari_pelanggan_manual" class="text-sm font-medium text-gray-600">Cari Pelanggan
                                (Nama / No HP)</label>
                            <div class="relative mt-1"><span
                                    class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><svg
                                        data-feather="search" class="h-5 w-5 text-gray-400"></svg></span><input
                                    type="text" id="cari_pelanggan_manual"
                                    class="w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg"
                                    placeholder="Cari pelanggan yang sudah ada...">
                            </div>
                        </div>
                        <p class="text-sm text-left text-gray-500 -my-2">atau masukkan data pelanggan baru ...</p>
                        <div>
                            <label for="nama_pelanggan_manual" class="text-sm font-medium text-gray-600">Nama Pelanggan
                                Baru</label>
                            <div class="relative mt-1"><span
                                    class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><svg
                                        data-feather="user" class="h-5 w-5 text-gray-400"></svg></span><input
                                    type="text" id="nama_pelanggan_manual"
                                    class="w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg"
                                    placeholder="Nama Pelanggan Baru"></div>
                        </div>
                        <div><label for="no_handphone_manual" class="text-sm font-medium text-gray-600">No Handphone
                                (WA)</label>
                            <div class="relative mt-1"><span
                                    class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><svg
                                        data-feather="phone" class="h-5 w-5 text-gray-400"></svg></span><input
                                    type="tel" id="no_handphone_manual"
                                    class="w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg"
                                    placeholder="No Handphone Pelanggan"></div>
                        </div>
                        <div><label for="alamat_manual" class="text-sm font-medium text-gray-600">Alamat
                                (Opsional)</label>
                            <div class="relative mt-1"><span
                                    class="absolute inset-y-0 left-0 top-3 pl-3 flex items-start pointer-events-none"><svg
                                        data-feather="map-pin" class="h-5 w-5 text-gray-400"></svg></span><textarea
                                    id="alamat_manual" rows="2"
                                    class="w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg"
                                    placeholder="Alamat untuk data / pengantaran"></textarea></div>
                        </div>
                    </div>
                </section>

                <section>
                    <h3 class="text-lg font-semibold text-gray-800 mb-3 pb-2 border-b">2. Informasi Pesanan</h3>
                    <div class="space-y-4">
                        <div>
                            <label for="tgl_selesai_manual" class="text-sm font-medium text-gray-600">Estimasi
                                Selesai</label>
                            <input type="datetime-local" id="tgl_selesai_manual"
                                class="w-full mt-1 px-3 py-3 border border-gray-300 rounded-lg">
                        </div>

                        <div>
                            <label for="status_awal_manual" class="text-sm font-medium text-gray-600">Status
                                Awal</label>
                            <select id="status_awal_manual"
                                class="w-full mt-1 py-3 px-3 border border-gray-300 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="Antrian" selected>Antrian (Diterima)</option>
                                <option value="Diproses">Langsung Diproses</option>
                            </select>
                        </div>
                    </div>
                </section>

                <section>
                    <h3 class="text-lg font-semibold text-gray-800 mb-3 pb-2 border-b">3. Rincian Layanan</h3>
                    <div class="border-b pb-3 mb-3">
                        <div class="flex justify-between items-center mb-2">
                            <label class="text-sm font-medium text-gray-600">Layanan 1</label>
                            <button type="button" class="text-red-500 hover:text-red-700">
                                <svg data-feather="trash-2" class="w-4 h-4"></svg>
                            </button>
                        </div>
                        <select
                            class="w-full py-3 px-3 border border-gray-300 rounded-lg bg-white mb-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option>-- Pilih Layanan (dari Kelola Layanan) --</option>
                            <option value="7000" selected>Kiloan Reguler (Rp 7.000/kg)</option>
                            <option value="10000">Kiloan Ekspres (Rp 10.000/kg)</option>
                            <option value="15000">Satuan - Jas (Rp 15.000/pcs)</option>
                            <option value="25000">Satuan - Bed Cover (Rp 25.000/pcs)</option>
                        </select>
                        <div class="grid grid-cols-2 gap-2">
                            <input type="number" placeholder="Qty (Kg / Pcs)"
                                class="w-full px-3 py-3 border border-gray-300 rounded-lg" value="1">
                            <input type="text" placeholder="Harga Total"
                                class="w-full px-3 py-3 border border-gray-300 rounded-lg bg-gray-100" value="Rp 7.000"
                                readonly>
                        </div>
                    </div>
                    <button type="button"
                        class="w-full border-2 border-dashed border-blue-500 text-blue-500 font-semibold py-3 px-4 rounded-lg hover:bg-blue-50">
                        + Tambah Layanan Lain
                    </button>
                    <div>
                        <div class="border-t pt-4"></div>
                        <label for="catatan_manual" class="text-sm font-medium text-gray-600">Catatan (Opsional)</label>
                        <div class="relative mt-1"><span
                                class="absolute inset-y-0 left-0 top-3 pl-3 flex items-start pointer-events-none"><svg
                                    data-feather="clipboard" class="h-5 w-5 text-gray-400"></svg></span><textarea
                                id="catatan_manual" rows="2"
                                class="w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg"
                                placeholder="Misal: Alergi parfum, minta lipat rapi..."></textarea></div>
                    </div>
                </section>

                <section>
                    <h3 class="text-lg font-semibold text-gray-800 mb-3 pb-2 border-b">4. Rincian Pembayaran</h3>
                    <div class="space-y-4">
                        <div><label class="text-sm font-medium text-gray-600">Subtotal</label><input type="text"
                                class="w-full mt-1 px-3 py-3 border border-gray-300 rounded-lg bg-gray-100"
                                value="Rp 7.000" readonly></div>
                        <div><label for="diskon" class="text-sm font-medium text-gray-600">Diskon (Rp)</label><input
                                type="number" id="diskon"
                                class="w-full mt-1 px-3 py-3 border border-gray-300 rounded-lg"
                                placeholder="Contoh: 1000"></div>
                        <div><label for="biaya_antar" class="text-sm font-medium text-gray-600">Biaya Antar
                                (Rp)</label><input type="number" id="biaya_antar"
                                class="w-full mt-1 px-3 py-3 border border-gray-300 rounded-lg" value="0"></div>
                        <div class="border-t pt-4">
                            <div class="flex justify-between items-center">
                                <span class="text-lg font-bold text-gray-900">Total Akhir</span>
                                <span class="text-2xl font-bold text-blue-600">Rp 6.000</span>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-3">
                            <div>
                                <label for="metode_bayar_manual" class="text-sm font-medium text-gray-600">Metode
                                    Bayar</label>
                                <select id="metode_bayar_manual"
                                    class="w-full mt-1 py-3 px-3 border border-gray-300 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    <option value="Tunai">Tunai</option>
                                    <option value="QRIS">QRIS</option>
                                    <option value="Transfer">Transfer</option>
                                </select>
                            </div>
                            <div>
                                <label for="status_bayar_manual" class="text-sm font-medium text-gray-600">Status
                                    Bayar</label>
                                <select id="status_bayar_manual"
                                    class="w-full mt-1 py-3 px-3 border border-gray-300 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    <option value="Belum Lunas" selected>Belum Lunas</option>
                                    <option value="Lunas">Lunas</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </section>
            </form>
        </div>
        <div class="flex-shrink-0 p-6 bg-white border-t border-gray-200">
            <button type="submit" form="form-buat-transaksi"
                class="w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700">
                Buat Transaksi
            </button>
        </div>
    </div>

    <div id="modal-transaksi-template"
        class="modal-popup hidden fixed bottom-0 left-0 right-0 bg-white rounded-t-[24px] shadow-2xl z-50 flex flex-col h-[90vh]">
        <div class="flex-shrink-0">
            <div class="w-full py-3">
                <div class="w-12 h-1.5 bg-gray-300 rounded-full mx-auto"></div>
            </div>
            <div class="flex justify-between items-center px-6 pb-4">
                <h2 class="text-xl font-bold text-gray-900">Buat Transaksi Cepat (POS)</h2>
                <button class="btn-close-global p-1 text-gray-500 hover:text-gray-800"><svg data-feather="x"
                        class="w-6 h-6"></svg></button>
            </div>
        </div>
        <div class="flex-grow overflow-y-auto p-6 no-scrollbar">
            <form id="form-buat-template" class="space-y-6">

                <section>
                    <h3 class="text-lg font-semibold text-gray-800 mb-3 pb-2 border-b">1. Informasi Pelanggan</h3>
                    <div class="space-y-4">
                        <div><label for="cari_pelanggan_template" class="text-sm font-medium text-gray-600">Cari
                                Pelanggan (Nama / No HP)</label>
                            <div class="relative mt-1"><span
                                    class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><svg
                                        data-feather="search" class="h-5 w-5 text-gray-400"></svg></span><input
                                    type="text" id="cari_pelanggan_template"
                                    class="w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg"
                                    placeholder="Cari pelanggan yang sudah ada..."></div>
                        </div>
                        <p class="text-sm text-gray-600 -mt-2 mb-3">atau masukkan data pelanggan baru ...</p>
                        <div><label for="nama_pelanggan_template" class="text-sm font-medium text-gray-600">Atau
                                Nama
                                Pelanggan Baru</label>
                            <div class="relative mt-1"><span
                                    class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><svg
                                        data-feather="user" class="h-5 w-5 text-gray-400"></svg></span><input
                                    type="text" id="nama_pelanggan_template"
                                    class="w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg"
                                    placeholder="Nama Pelanggan Baru"></div>
                        </div>
                        <div><label for="no_handphone_template" class="text-sm font-medium text-gray-600">No
                                Handphone
                                (WA)</label>
                            <div class="relative mt-1"><span
                                    class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><svg
                                        data-feather="phone" class="h-5 w-5 text-gray-400"></svg></span><input
                                    type="tel" id="no_handphone_template"
                                    class="w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg"
                                    placeholder="No Handphone Pelanggan"></div>
                        </div>
                    </div>
                </section>

                <section>
                    <h3 class="text-lg font-semibold text-gray-800 mb-3 pb-2 border-b">2. Informasi Pesanan</h3>
                    <div class="space-y-4">
                        <div>
                            <label for="tgl_selesai_template" class="text-sm font-medium text-gray-600">Estimasi
                                Selesai</label>
                            <input type="datetime-local" id="tgl_selesai_template"
                                class="w-full mt-1 px-3 py-3 border border-gray-300 rounded-lg">
                        </div>

                        <div>
                            <label for="status_awal_template" class="text-sm font-medium text-gray-600">Status
                                Awal</label>
                            <select id="status_awal_template"
                                class="w-full mt-1 py-3 px-3 border border-gray-300 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="Antrian" selected>Antrian (Diterima)</option>
                                <option value="Diproses">Langsung Diproses</option>
                            </select>
                        </div>
                    </div>
                </section>

                <section>
                    <h3 class="text-lg font-semibold text-gray-800 mb-3 pb-2 border-b">3. Pilih Layanan (Menu Cepat)
                    </h3>
                    <p class="text-sm text-gray-600 -mt-2 mb-3">(Daftar layanan ini harusnya diambil secara dinamis
                        dari
                        menu "Kelola Layanan" Anda)</p>

                    <div class="space-y-2 mb-4" id="keranjang-layanan">
                    </div>

                    <div class="grid grid-cols-2 gap-3" id="daftar-layanan-dinamis">
                        <button type="button"
                            class="text-left bg-white border border-gray-300 rounded-lg p-3 hover:border-blue-500 hover:bg-blue-50"
                            data-nama="Kiloan Reguler" data-harga="7000" data-unit="kg">
                            <p class="font-semibold">Kiloan Reguler</p>
                            <p class="text-sm text-gray-600">Rp 7.000 / kg</p>
                        </button>
                        <button type="button"
                            class="text-left bg-white border border-gray-300 rounded-lg p-3 hover:border-blue-500 hover:bg-blue-50"
                            data-nama="Kemeja Satuan" data-harga="15000" data-unit="pcs">
                            <p class="font-semibold">Kemeja Satuan</p>
                            <p class="text-sm text-gray-600">Rp 15.000 / pcs</p>
                        </button>
                        <button type="button"
                            class="text-left bg-white border border-gray-300 rounded-lg p-3 hover:border-blue-500 hover:bg-blue-50"
                            data-nama="Cuci Karpet" data-harga="15000" data-unit="m²">
                            <p class="font-semibold">Cuci Karpet</p>
                            <p class="text-sm text-gray-600">Rp 15.000 / m²</p>
                        </button>
                        <button type="button"
                            class="text-left bg-white border border-gray-300 rounded-lg p-3 hover:border-blue-500 hover:bg-blue-50"
                            data-nama="Bed Cover" data-harga="25000" data-unit="pcs">
                            <p class="font-semibold">Bed Cover</p>
                            <p class="text-sm text-gray-600">Rp 25.000 / pcs</p>
                        </button>
                    </div>

                    <div>
                        <div class="border-t pt-4"></div>
                        <label for="catatan_template" class="text-sm font-medium text-gray-600">Catatan
                            (Opsional)</label>
                        <div class="relative mt-1"><span
                                class="absolute inset-y-0 left-0 top-3 pl-3 flex items-start pointer-events-none"><svg
                                    data-feather="clipboard" class="h-5 w-5 text-gray-400"></svg></span><textarea
                                id="catatan_template" rows="2"
                                class="w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg"
                                placeholder="Misal: Alergi parfum, minta lipat rapi..."></textarea></div>
                    </div>
                </section>
                <section>
                    <h3 class="text-lg font-semibold text-gray-800 mb-3 pb-2 border-b">4. Rincian Pembayaran</h3>
                    <div class="space-y-4">
                        <div>
                            <div class="flex justify-between items-center">
                                <span class="text-lg font-bold text-gray-900">Total Akhir</span>
                                <span class="text-2xl font-bold text-blue-600" id="template-total-akhir">Rp 0</span>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-3">
                            <div>
                                <label for="metode_bayar_template" class="text-sm font-medium text-gray-600">Metode
                                    Bayar</label>
                                <select id="metode_bayar_template"
                                    class="w-full mt-1 py-3 px-3 border border-gray-300 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    <option value="Tunai">Tunai</option>
                                    <option value="QRIS">QRIS</option>
                                    <option value="Transfer">Transfer</option>
                                </select>
                            </div>
                            <div>
                                <label for="status_bayar_template" class="text-sm font-medium text-gray-600">Status
                                    Bayar</label>
                                <select id="status_bayar_template"
                                    class="w-full mt-1 py-3 px-3 border border-gray-300 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    <option value="Belum Lunas" selected>Belum Lunas</option>
                                    <option value="Lunas">Lunas</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </section>

            </form>
        </div>

        <div class="flex-shrink-0 p-6 bg-white border-t border-gray-200">
            <button type="submit" form="form-buat-template"
                class="w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700">
                Buat Transaksi
            </button>
        </div>
    </div>

    <div id="modal-pengeluaran"
        class="modal-popup hidden fixed bottom-0 left-0 right-0 bg-white rounded-t-[24px] shadow-2xl z-50 flex flex-col h-[90vh]">
        <div class="flex-shrink-0">
            <div class="w-full py-3">
                <div class="w-12 h-1.5 bg-gray-300 rounded-full mx-auto"></div>
            </div>
            <div class="flex justify-between items-center px-6 pb-4">
                <h2 class="text-xl font-bold text-gray-900">Catat Pengeluaran</h2><button
                    class="btn-close-global p-1 text-gray-500 hover:text-gray-800"><svg data-feather="x"
                        class="w-6 h-6"></svg></button>
            </div>
        </div>
        <div class="flex-grow overflow-y-auto p-6 no-scrollbar">
            <form id="form-pengeluaran" class="space-y-4">

                <div><label for="nama_pengeluaran" class="text-sm font-medium text-gray-600">Nama
                        Pengeluaran</label>
                    <div class="relative mt-1"><span
                            class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><svg
                                data-feather="edit" class="h-5 w-5 text-gray-400"></svg></span><input type="text"
                            id="nama_pengeluaran" class="w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg"
                            placeholder="Contoh : Beli Deterjen"></div>
                </div>

                <div><label for="nominal_pengeluaran" class="text-sm font-medium text-gray-600">Nominal
                        Pengeluaran</label>
                    <div class="relative mt-1"><span
                            class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><svg
                                data-feather="dollar-sign" class="h-5 w-5 text-gray-400"></svg></span><input
                            type="number" id="nominal_pengeluaran"
                            class="w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg"
                            placeholder="Contoh : 50000"></div>
                </div>

                <div>
                    <label for="kategori_pengeluaran" class="text-sm font-medium text-gray-600">Kategori</label>
                    <select id="kategori_pengeluaran"
                        class="w-full mt-1 py-3 px-3 border border-gray-300 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option>-- Pilih Kategori --</option>
                        <option>Bahan Baku (Deterjen, Parfum)</option>
                        <option>Operasional (Listrik, Air)</option>
                        <option>Lain-Lain</option>
                    </select>
                </div>

                <div><label for="tanggal_pengeluaran" class="text-sm font-medium text-gray-600">Tanggal
                        Pengeluaran</label>
                    <input type="date" id="tanggal_pengeluaran"
                        class="w-full mt-1 px-3 py-3 border border-gray-300 rounded-lg" value="">
                </div>

                <div>
                    <label for="metode_bayar_pengeluaran" class="text-sm font-medium text-gray-600">Metode
                        Pembayaran</label>
                    <select id="metode_bayar_pengeluaran"
                        class="w-full mt-1 py-3 px-3 border border-gray-300 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option>Tunai (Kas)</option>
                        <option>Transfer Bank</option>
                    </select>
                </div>

                <div><label for="keterangan_pengeluaran" class="text-sm font-medium text-gray-600">Keterangan
                        (Opsional)</label>
                    <textarea id="keterangan_pengeluaran" rows="3"
                        class="w-full mt-1 px-3 py-3 border border-gray-300 rounded-lg"
                        placeholder="Contoh: Deterjen bubuk 10kg"></textarea>
                </div>

                <div><label for="dibuat_oleh" class="text-sm font-medium text-gray-600">Dibuat Oleh</label>
                    <div class="relative mt-1"><span
                            class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><svg
                                data-feather="user" class="h-5 w-5 text-gray-400"></svg></span><input type="text"
                            id="dibuat_oleh"
                            class="w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg bg-gray-100"
                            value="Febriana (Owner)" readonly></div>
                </div>
            </form>
        </div>

        <div class="flex-shrink-0 p-6 bg-white border-t border-gray-200">
            <button type="submit" form="form-pengeluaran"
                class="w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700">
                Simpan Pengeluaran
            </button>
        </div>
    </div>

    <script src="../../assets/js/icons.js" defer></script>
    <script src="../../assets/js/main.js" defer></script>
    <script src="../../assets/js/karyawan-transaksi.js" defer></script>

</body>

</html>